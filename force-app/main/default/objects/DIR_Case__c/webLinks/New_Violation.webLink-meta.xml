<?xml version="1.0" encoding="UTF-8"?>
<WebLink xmlns="http://soap.sforce.com/2006/04/metadata">
    <fullName>New_Violation</fullName>
    <availability>online</availability>
    <displayType>button</displayType>
    <linkType>javascript</linkType>
    <masterLabel>New Case Issue</masterLabel>
    <openType>onClickJavaScript</openType>
    <protected>false</protected>
    <url>{!DIR_Case__c.Received_Check_Stubs__c}{!REQUIRESCRIPT(&#39;/soap/ajax/26.0/connection.js&#39;)} 
var naicsCode = &quot;{!DIR_Case__c.NAICS_Code__c}&quot;;
var dlseProgram = &quot;{!DIR_Case__c.DLSE_Program__c}&quot;;
var employerIndustry = &quot;{!DIR_Case__c.Employer_Industry__c}&quot;;
var naicsCode = &quot;{!DIR_Case__c.NAICS_Code__c}&quot;;
var recordTypeText = &quot;{!DIR_Case__c.Record_Type_Text__c}&quot;;
var recordType = &quot;{!DIR_Case__c.RecordType}&quot;;

if ((recordType.indexOf(&#39;BOFE&#39;) &gt;= 0)) {
    if(employerIndustry != &#39;Not Specified&#39; &amp;&amp; dlseProgram != &#39;&#39; &amp;&amp; naicsCode != &#39;&#39;) {
        window.location=&quot;/apex/NewViolation?id={!DIR_Case__c.Id}&quot;;
    } else {
        if (dlseProgram == &#39;&#39;)
            alert(&#39;Please set the DLSE Program on the case record before adding any Case Issues.&#39;);
        if (employerIndustry == &#39;Not Specified&#39; || naicsCode == &#39;&#39;)
            alert(&#39;Please add the appropriate NAICS code to the employer’s account and verify that industry has been set correctly before adding any Case Issues.&#39;);
    }
} else if ((recordType.indexOf(&#39;WCA&#39;) &gt;= 0)) {
    if(employerIndustry != &#39;Not Specified&#39; &amp;&amp; naicsCode != &#39;&#39;) {
        window.location=&quot;/apex/NewViolation?id={!DIR_Case__c.Id}&quot;;
    } else {
        if (employerIndustry == &#39;Not Specified&#39; || naicsCode == &#39;&#39;)
            alert(&#39;Please add the appropriate NAICS code to the employer’s account and verify that industry has been set correctly before adding any Case Issues.&#39;);
    }
} else {
    window.location=&quot;/apex/NewViolation?id={!DIR_Case__c.Id}&quot;;
}</url>
</WebLink>
